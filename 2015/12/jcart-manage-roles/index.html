<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="title" property="title" content="SivaLabs - JCart: Manage Roles"><meta name="description" property="description" content="Java, Spring, SpringBoot, SpringCloud, JPA, Hibernate, DevOps, MicroServices, Docker tutorials - "><title>SivaLabs - JCart: Manage Roles</title><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JCart: Manage Roles"><meta name="twitter:description" content="In our previous post Manage Privileges – List all privileges we have implemented the functionality to show list of permissions. In this post we will implement Role management such as listing all Roles, creating new Role, editing Role permissions etc.
Basically a Role is nothing a but group of Permissions assigned so that giving access to a set of action to user will become easy by assigning Roles.
In this post we are going to see lot of code snippets, so I would suggest to clone the repo https://github."><meta property="og:title" content="JCart: Manage Roles"><meta property="og:description" content="In our previous post Manage Privileges – List all privileges we have implemented the functionality to show list of permissions. In this post we will implement Role management such as listing all Roles, creating new Role, editing Role permissions etc.
Basically a Role is nothing a but group of Permissions assigned so that giving access to a set of action to user will become easy by assigning Roles.
In this post we are going to see lot of code snippets, so I would suggest to clone the repo https://github."><meta property="og:type" content="article"><meta property="og:url" content="https://sivalabs.github.io/2015/12/jcart-manage-roles/"><meta property="article:published_time" content="2015-12-19T03:16:38&#43;00:00"><meta property="article:modified_time" content="2015-12-19T03:16:38&#43;00:00"><meta itemprop="name" content="JCart: Manage Roles"><meta itemprop="description" content="In our previous post Manage Privileges – List all privileges we have implemented the functionality to show list of permissions. In this post we will implement Role management such as listing all Roles, creating new Role, editing Role permissions etc.
Basically a Role is nothing a but group of Permissions assigned so that giving access to a set of action to user will become easy by assigning Roles.
In this post we are going to see lot of code snippets, so I would suggest to clone the repo https://github."><meta itemprop="datePublished" content="2015-12-19T03:16:38&#43;00:00"><meta itemprop="dateModified" content="2015-12-19T03:16:38&#43;00:00"><meta itemprop="wordCount" content="1473"><meta itemprop="keywords" content="jcart,"><link rel="stylesheet" href="/assets/css/bootstrap.min.css" type="text/css" media="all"><link rel="stylesheet" href="/assets/css/font-awesome.min.css" type="text/css" media="all"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans%3A400italic%2C400%2C600%2C700%7CRoboto+Slab%3A400%2C300%2C700&#038;ver=4.8.3" type="text/css" media="all"><link rel="stylesheet" href="/assets/css/style.css" type="text/css" media="all"><link rel="stylesheet" href="/assets/js/vendor/social-icons-widget-by-wpzoom/assets/css/socicon.css" type="text/css" media="all"><link rel="stylesheet" href="/assets/css/social-logos/social-logos.css" type="text/css" media="all"><link rel="stylesheet" href="/assets/css/jetpack.css" type="text/css" media="all"><link rel="shortcut icon" href="/favicon.png" type="image/x-icon"></head><body class="home blog"><div id="page" class="hfeed site"><header id="masthead" class="site-header" role="banner"><nav class="navbar navbar-default" role="navigation"><div class="container"><div class="row"><div class="site-navigation-inner col-sm-12"><div class="navbar-header"><button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div id="logo"><h1 class="site-name"><a class="navbar-brand" href="/" title="SivaLabs" rel="home">SivaLabs</a></h1></div></div><div class="collapse navbar-collapse navbar-ex1-collapse"><ul id="menu-home" class="nav navbar-nav"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1774 dropdown"><a href="#">Tutorials </a><span class="caret sparkling-dropdown"></span><ul role="menu" class="dropdown-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/tutorials/java">&nbsp;Java</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/tutorials/springboot">&nbsp;Spring Boot</a></li></ul></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/projects">Projects</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/videos">Videos</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/mybooks">My Books</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/contact">Contact</a></li></ul></div></div></div></div></nav></header><div id="content" class="site-content"><div class="container main-content-area"><div class="row side-pull-left"><div class="main-content-inner col-sm-12 col-md-8"><div id="primary" class="content-area"><article class="post type-post status-publish format-standard hentry"><div class="post-inner-content"><header class="entry-header page-header"><h1 class="entry-title">JCart: Manage Roles</h1><div class="entry-meta"><span><i class="fa fa-user"></i> <span class="author vcard">Siva</span> </span><span class="posted-on"><i class="fa fa-calendar"></i> <time class="entry-date published" datetime="2015-12-19T03:16:38">December 19, 2015 </time></span><span><i class="fa fa-folder-open-o"></i> <a class="article-category-link" href="/categories/java/">Java</a> </span><span class="tagcloud post-tags"><i class="fa fa-tags"></i> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/jcart/">jcart</a></span></div></header><div class="entry-content"><p>In our previous post <strong>Manage Privileges – List all privileges</strong> we have implemented the functionality to show list of permissions. In this post we will implement Role management such as listing all Roles, creating new Role, editing Role permissions etc.</p><p>Basically a Role is nothing a but group of Permissions assigned so that giving access to a set of action to user will become easy by assigning Roles.</p><p>In this post we are going to see lot of code snippets, so I would suggest to clone the repo <a href="https://github.com/sivaprasadreddy/jcart" target="_blank"><a href="https://github.com/sivaprasadreddy/jcart">https://github.com/sivaprasadreddy/jcart</a></a>.</p><p>We already have <strong>Role</strong> JPA entity created and some sample data is already inserted using data.sql script.</p><h2 id="list-all-roles">List all Roles</h2><p>First let us create a Spring Data JPA repository for Role entity.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">RoleRepository</span> <span style="color:#66d9ef">extends</span> JpaRepository<span style="color:#f92672">&lt;</span>Role<span style="color:#f92672">,</span> Integer<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">{</span>
	Role <span style="color:#a6e22e">findByName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span></code></pre></div><p>In <strong>SecurityService</strong> implement a method to return all the permissions.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Service</span>
<span style="color:#a6e22e">@Transactional</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SecurityService</span>
<span style="color:#f92672">{</span>
	<span style="color:#a6e22e">@Autowired</span> UserRepository userRepository<span style="color:#f92672">;</span>
	<span style="color:#a6e22e">@Autowired</span> PermissionRepository permissionRepository<span style="color:#f92672">;</span>
	<span style="color:#a6e22e">@Autowired</span> RoleRepository roleRepository<span style="color:#f92672">;</span>
	<span style="color:#f92672">...</span>
	<span style="color:#f92672">...</span>
		
	<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Role<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getAllRoles</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> roleRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findAll</span><span style="color:#f92672">();</span>
	<span style="color:#f92672">}</span>

<span style="color:#f92672">}</span></code></pre></div><p>Create a SpringMVC controller to handle all Role related actions.</p><p>This action should be available to only users who have &#8220;<strong>ROLE_MANAGE_ROLES</strong>&#8220;, so let us add @Secured annotation to <strong>RoleController</strong>.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Controller</span>
<span style="color:#a6e22e">@Secured</span><span style="color:#f92672">(</span>SecurityUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">MANAGE_ROLES</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RoleController</span> <span style="color:#66d9ef">extends</span> JCartAdminBaseController
<span style="color:#f92672">{</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String viewPrefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;roles/&#34;</span><span style="color:#f92672">;</span>
	
	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">protected</span> String <span style="color:#a6e22e">getHeaderTitle</span><span style="color:#f92672">()</span>
	<span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Manage Roles&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
		
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span>value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/roles&#34;</span><span style="color:#f92672">,</span> method<span style="color:#f92672">=</span>RequestMethod<span style="color:#f92672">.</span><span style="color:#a6e22e">GET</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">listRoles</span><span style="color:#f92672">(</span>Model model<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		List<span style="color:#f92672">&lt;</span>Role<span style="color:#f92672">&gt;</span> list <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">getAllRoles</span><span style="color:#f92672">();</span>
		model<span style="color:#f92672">.</span><span style="color:#a6e22e">addAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;roles&#34;</span><span style="color:#f92672">,</span>list<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> viewPrefix<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;roles&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
<span style="color:#f92672">}</span></code></pre></div><p>Create thymeleaf view <strong>jcart-admin/src/main/resources/templates/roles/roles.html</strong>.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">xmlns</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/1999/xhtml&#34;</span>
	<span style="color:#a6e22e">xmlns:th</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org&#34;</span>
	<span style="color:#a6e22e">xmlns:sec</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&#34;</span>
	<span style="color:#a6e22e">layout:decorator</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;layout/mainLayout&#34;</span>&gt;

&lt;<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">title</span>&gt;Roles&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;

	&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">layout:fragment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span>&gt;
		&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;row&#34;</span>&gt;
			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;col-md-12&#34;</span>&gt;
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box&#34;</span>&gt;
					&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-header&#34;</span>&gt;
						&lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-title&#34;</span>&gt;List of Roles&lt;/<span style="color:#f92672">h3</span>&gt;
						&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-tools&#34;</span>&gt;
							&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;input-group&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 150px;&#34;</span>&gt;
								&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-sm btn-default&#34;</span> <span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/roles/new}&#34;</span>&gt;&lt;<span style="color:#f92672">i</span>
									<span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-plus-circle&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt; New Role&lt;/<span style="color:#f92672">a</span>&gt;
							&lt;/<span style="color:#f92672">div</span>&gt;
						&lt;/<span style="color:#f92672">div</span>&gt;
					&lt;/<span style="color:#f92672">div</span>&gt;
					&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-body table-responsive no-padding&#34;</span>&gt;
						&lt;<span style="color:#f92672">table</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;table table-hover&#34;</span>&gt;
							&lt;<span style="color:#f92672">tr</span>&gt;
								&lt;<span style="color:#f92672">th</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 10px&#34;</span>&gt;#&lt;/<span style="color:#f92672">th</span>&gt;
								&lt;<span style="color:#f92672">th</span>&gt;Name&lt;/<span style="color:#f92672">th</span>&gt;
								&lt;<span style="color:#f92672">th</span>&gt;Description&lt;/<span style="color:#f92672">th</span>&gt;
								&lt;<span style="color:#f92672">th</span>&gt;Edit&lt;/<span style="color:#f92672">th</span>&gt;

							&lt;/<span style="color:#f92672">tr</span>&gt;
							&lt;<span style="color:#f92672">tr</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;role,iterStat : ${roles}&#34;</span>&gt;
								&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/roles/{id}(id=${role.id})}&#34;</span>&gt;&lt;<span style="color:#f92672">span</span>
										<span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${iterStat.count}&#34;</span>&gt;1&lt;/<span style="color:#f92672">span</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;&lt;/<span style="color:#f92672">td</span>&gt;
								&lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${role.name}&#34;</span>&gt;Role Name&lt;/<span style="color:#f92672">td</span>&gt;
								&lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${role.description}&#34;</span>&gt;Role Description&lt;/<span style="color:#f92672">td</span>&gt;
								&lt;<span style="color:#f92672">td</span>&gt;&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/roles/{id}(id=${role.id})}&#34;</span>
										<span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-sm btn-default&#34;</span>&gt;
										&lt;<span style="color:#f92672">i</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-edit&#34;</span>&gt;&lt;/<span style="color:#f92672">i</span>&gt;Edit
									&lt;/<span style="color:#f92672">a</span>&gt;
								&lt;/<span style="color:#f92672">td</span>&gt;
							&lt;/<span style="color:#f92672">tr</span>&gt;

						&lt;/<span style="color:#f92672">table</span>&gt;
					&lt;/<span style="color:#f92672">div</span>&gt;

				&lt;/<span style="color:#f92672">div</span>&gt;
			&lt;/<span style="color:#f92672">div</span>&gt;
		&lt;/<span style="color:#f92672">div</span>&gt;

	&lt;/<span style="color:#f92672">div</span>&gt;
	
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;</code></pre></div><p>Observe that though we have not yet implemented functionality for adding new Role or view/edit Role we have added &#8220;New Role&#8221; button and links to view/edit Role info which we are going to implement next.</p><p>Now run <strong>JCartAdminApplication.java</strong> and login and go click on Roles menu in Left side navigation and you should be able to see list of all Roles.</p><h2 id="create-new-role">Create New Role</h2><p>In our List Roles screen we have added a button &#8220;New Role&#8221; which will take you to &#8220;roles/new&#8221; URL. Let us implement SpringMVC controller methods to handle showing new role form and role creation POST method.</p><p>While showing New Role form we should also show list of permission that we would like to add to the newly creating Role.</p><p>Also we want to validate the New Role form to check for any missing mandatory details.</p><p>First let us implement <strong>RoleValidator</strong> <strong>jcart-admin/src/main/java/com/sivalabs/jcart/admin/web/validators/RoleValidator.java</strong> as follows:</p><p></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.sivalabs.jcart.admin.web.validators<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.MessageSource<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.validation.Errors<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.validation.Validator<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> com.sivalabs.jcart.entities.Role<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> com.sivalabs.jcart.security.SecurityService<span style="color:#f92672">;</span>


<span style="color:#a6e22e">@Component</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RoleValidator</span> <span style="color:#66d9ef">implements</span> Validator
<span style="color:#f92672">{</span>
	<span style="color:#a6e22e">@Autowired</span> <span style="color:#66d9ef">protected</span> MessageSource messageSource<span style="color:#f92672">;</span>
	<span style="color:#a6e22e">@Autowired</span> <span style="color:#66d9ef">protected</span> SecurityService securityService<span style="color:#f92672">;</span>
	
	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">supports</span><span style="color:#f92672">(</span>Class<span style="color:#f92672">&lt;?&gt;</span> clazz<span style="color:#f92672">)</span>
	<span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> Role<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>clazz<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">validate</span><span style="color:#f92672">(</span>Object target<span style="color:#f92672">,</span> Errors errors<span style="color:#f92672">)</span>
	<span style="color:#f92672">{</span>
		Role role <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>Role<span style="color:#f92672">)</span> target<span style="color:#f92672">;</span>
		String name <span style="color:#f92672">=</span> role<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">();</span>
		Role RoleByName <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">getRoleByName</span><span style="color:#f92672">(</span>name<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>RoleByName <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
			errors<span style="color:#f92672">.</span><span style="color:#a6e22e">rejectValue</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;error.exists&#34;</span><span style="color:#f92672">,</span>
								<span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[]{</span>name<span style="color:#f92672">},</span> 
								<span style="color:#e6db74">&#34;Role &#34;</span><span style="color:#f92672">+</span>name<span style="color:#f92672">+</span><span style="color:#e6db74">&#34; already exists&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
	<span style="color:#f92672">}</span>	
<span style="color:#f92672">}</span></code></pre></div><p></p><p>One thing to notice here is we already have <strong>BeanValidation</strong> annotation <strong>@NotEmpty</strong> on <strong>&#8220;name&#8221;</strong> property which SpringMVC automatically checks for. But we also need to check whether the new is already in use or not by talking to database.</p><p>Also observe that we are using message keys from ResourceBundle <strong>messages.properties</strong> to have internationalization.</p><p>Add the following properties to <strong>messages.properties</strong></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">error<span style="color:#f92672">.</span><span style="color:#a6e22e">required</span><span style="color:#f92672">={</span>0<span style="color:#f92672">}</span> is required
error<span style="color:#f92672">.</span><span style="color:#a6e22e">invalid</span><span style="color:#f92672">={</span>0<span style="color:#f92672">}</span> is invalid
error<span style="color:#f92672">.</span><span style="color:#a6e22e">exists</span><span style="color:#f92672">={</span>0<span style="color:#f92672">}</span> already exists</code></pre></div><p>Now we need to implement <strong>getRoleByName()</strong> and <strong>createRole()</strong> methods in our <strong>SecurityService</strong>.</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Service</span>
<span style="color:#a6e22e">@Transactional</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SecurityService</span>
<span style="color:#f92672">{</span>
	<span style="color:#66d9ef">public</span> Role <span style="color:#a6e22e">getRoleByName</span><span style="color:#f92672">(</span>String roleName<span style="color:#f92672">)</span>
	<span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> roleRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findByName</span><span style="color:#f92672">(</span>roleName<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#66d9ef">public</span> Role <span style="color:#a6e22e">createRole</span><span style="color:#f92672">(</span>Role role<span style="color:#f92672">)</span>
	<span style="color:#f92672">{</span>
		Role roleByName <span style="color:#f92672">=</span> getRoleByName<span style="color:#f92672">(</span>role<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>roleByName <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
			<span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> JCartException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Role &#34;</span><span style="color:#f92672">+</span>role<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34; already exist&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">//TODO; i18n
</span><span style="color:#75715e"></span>		<span style="color:#f92672">}</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> persistedPermissions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> permissions <span style="color:#f92672">=</span> role<span style="color:#f92672">.</span><span style="color:#a6e22e">getPermissions</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>permissions <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
			<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Permission permission <span style="color:#f92672">:</span> permissions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
				<span style="color:#f92672">{</span>
					persistedPermissions<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>permissionRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findOne</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">()));</span>
				<span style="color:#f92672">}</span>
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span>
		
		role<span style="color:#f92672">.</span><span style="color:#a6e22e">setPermissions</span><span style="color:#f92672">(</span>persistedPermissions<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> roleRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">(</span>role<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>
	
<span style="color:#f92672">}</span></code></pre></div><p>I hope these 2 methods are self explanatory.</p><p>Now let us implement the request handler methods in <strong>RoleController</strong> as follows:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Controller</span>
<span style="color:#a6e22e">@Secured</span><span style="color:#f92672">(</span>SecurityUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">MANAGE_ROLES</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RoleController</span> <span style="color:#66d9ef">extends</span> JCartAdminBaseController
<span style="color:#f92672">{</span>
	<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String viewPrefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;roles/&#34;</span><span style="color:#f92672">;</span>
	
	<span style="color:#a6e22e">@Autowired</span> <span style="color:#66d9ef">protected</span> SecurityService securityService<span style="color:#f92672">;</span>
	<span style="color:#a6e22e">@Autowired</span> <span style="color:#66d9ef">private</span> RoleValidator roleValidator<span style="color:#f92672">;</span>

	<span style="color:#f92672">...</span>
	<span style="color:#f92672">...</span>
	
	<span style="color:#a6e22e">@ModelAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;permissionsList&#34;</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">permissionsList</span><span style="color:#f92672">(){</span>
		<span style="color:#66d9ef">return</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">getAllPermissions</span><span style="color:#f92672">();</span>
	<span style="color:#f92672">}</span>
		
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span>value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/roles/new&#34;</span><span style="color:#f92672">,</span> method<span style="color:#f92672">=</span>RequestMethod<span style="color:#f92672">.</span><span style="color:#a6e22e">GET</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">createRoleForm</span><span style="color:#f92672">(</span>Model model<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Role role <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Role<span style="color:#f92672">();</span>
		model<span style="color:#f92672">.</span><span style="color:#a6e22e">addAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;role&#34;</span><span style="color:#f92672">,</span>role<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> viewPrefix<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;create_role&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span>value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/roles&#34;</span><span style="color:#f92672">,</span> method<span style="color:#f92672">=</span>RequestMethod<span style="color:#f92672">.</span><span style="color:#a6e22e">POST</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">createRole</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Valid</span> <span style="color:#a6e22e">@ModelAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;role&#34;</span><span style="color:#f92672">)</span> Role role<span style="color:#f92672">,</span> BindingResult result<span style="color:#f92672">,</span> 
			Model model<span style="color:#f92672">,</span> RedirectAttributes redirectAttributes<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		roleValidator<span style="color:#f92672">.</span><span style="color:#a6e22e">validate</span><span style="color:#f92672">(</span>role<span style="color:#f92672">,</span> result<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>result<span style="color:#f92672">.</span><span style="color:#a6e22e">hasErrors</span><span style="color:#f92672">()){</span>
			<span style="color:#66d9ef">return</span> viewPrefix<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;create_role&#34;</span><span style="color:#f92672">;</span>
		<span style="color:#f92672">}</span>
		Role persistedRole <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">createRole</span><span style="color:#f92672">(</span>role<span style="color:#f92672">);</span>
		logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Created new role with id : {} and name : {}&#34;</span><span style="color:#f92672">,</span> persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">(),</span> persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
		redirectAttributes<span style="color:#f92672">.</span><span style="color:#a6e22e">addFlashAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Role created successfully&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">//TODO; i18n
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;redirect:/roles&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>

<span style="color:#f92672">}</span></code></pre></div><p>We need to add List for both create Role and update Role forms as well. So added as a separate method with <strong>@ModelAttribute</strong> instead of adding List to Model in 2 places.</p><blockquote><p>Note that BindingResult result argument should be next to @ModelAttribute property to have validation errors population working properly.</p></blockquote><p>Let us create the CreateRole thymeleaf view <strong>jcart-admin/src/main/resources/templates/roles/create_role.html</strong> as follows:</p><p></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">xmlns</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/1999/xhtml&#34;</span> <span style="color:#a6e22e">xmlns:th</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org&#34;</span>
	  <span style="color:#a6e22e">xmlns:sec</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&#34;</span>
      <span style="color:#a6e22e">layout:decorator</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;layout/mainLayout&#34;</span>&gt;
      
&lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Roles - New&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
	
	&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">layout:fragment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span>&gt;
		
		  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box box-warning&#34;</span>&gt;
			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-header with-border&#34;</span>&gt;
			  &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-title&#34;</span>&gt;Create New Role&lt;/<span style="color:#f92672">h3</span>&gt;
			&lt;/<span style="color:#f92672">div</span>&gt;
			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-body&#34;</span>&gt;
			  &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form&#34;</span> <span style="color:#a6e22e">th:action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/roles}&#34;</span> <span style="color:#a6e22e">th:object</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${role}&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
				&lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;global&#39;)}&#34;</span> <span style="color:#a6e22e">th:errors</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{global}&#34;</span> <span style="color:#a6e22e">th:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-red&#34;</span>&gt;Incorrect data&lt;/<span style="color:#f92672">p</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span> <span style="color:#a6e22e">th:classappend</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;name&#39;)}? &#39;has-error&#39;&#34;</span>&gt;
				  &lt;<span style="color:#f92672">label</span>&gt;Name&lt;/<span style="color:#f92672">label</span>&gt;
				  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{name}&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter Role Name&#34;</span>/&gt;
				  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;name&#39;)}&#34;</span> <span style="color:#a6e22e">th:errors</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{name}&#34;</span> <span style="color:#a6e22e">th:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-red&#34;</span>&gt;Incorrect data&lt;/<span style="color:#f92672">p</span>&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
				
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span> <span style="color:#a6e22e">th:classappend</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;description&#39;)}? &#39;has-error&#39;&#34;</span>&gt;
				  &lt;<span style="color:#f92672">label</span>&gt;Description&lt;/<span style="color:#f92672">label</span>&gt;
				  &lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;description&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{description}&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter Role Description&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;
				  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;description&#39;)}&#34;</span> <span style="color:#a6e22e">th:errors</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{description}&#34;</span> <span style="color:#a6e22e">th:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-red&#34;</span>&gt;Incorrect data&lt;/<span style="color:#f92672">p</span>&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
					&lt;<span style="color:#f92672">label</span>&gt;Permissions&lt;/<span style="color:#f92672">label</span>&gt;
					&lt;<span style="color:#f92672">div</span>&gt;
					  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;permission,rowStat : ${permissionsList}&#34;</span>&gt;
						&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{permissions[__${rowStat.index}__].id}&#34;</span> <span style="color:#a6e22e">th:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.id}&#34;</span> /&gt;
						&lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.name}&#34;</span>&gt;Permission&lt;/<span style="color:#f92672">label</span>&gt;
					  &lt;/<span style="color:#f92672">p</span>&gt;
					&lt;/<span style="color:#f92672">div</span>&gt;
					
				&lt;/<span style="color:#f92672">div</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-footer&#34;</span>&gt;
					&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span>&gt;Submit&lt;/<span style="color:#f92672">button</span>&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
			  &lt;/<span style="color:#f92672">form</span>&gt;
			&lt;/<span style="color:#f92672">div</span>&gt;
		  &lt;/<span style="color:#f92672">div</span>&gt;
	&lt;/<span style="color:#f92672">div</span>&gt;
	
&lt;/<span style="color:#f92672">body</span>&gt;    
&lt;/<span style="color:#f92672">html</span>&gt;</code></pre></div><p></p><h3 id="few-things-to-observe">Few things to observe:</h3><ul><li>We are applying css error class if a field has error using th:classappend=&#8221;${#fields.hasErrors(&#8216;name&#8217;)}? &#8216;has-error&rsquo;&#8221;</li><li>Showing error if a field has error using<p th:if="&#8221;${#fields.hasErrors(&#8216;name&#8217;)}&#8221;" th:errors="&#8221;*{name}&#8221;" th:class="&#8221;text-red&#8221;">Incorrect data</p></li><li>We are iterating through List<permission>showing them as checkboxes and binding the selected checkboxes (Permission Ids) to &#8220;id&#8221; property of List<permission>permissions property in Role as follows:</permission></permission></li></ul><p></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;permission,rowStat : ${permissionsList}&#34;</span>&gt;
	&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{permissions[__${rowStat.index}__].id}&#34;</span> <span style="color:#a6e22e">th:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.id}&#34;</span> /&gt;
	&lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.name}&#34;</span>&gt;Permission&lt;/<span style="color:#f92672">label</span>&gt;
&lt;/<span style="color:#f92672">p</span>&gt;</code></pre></div><p></p><p>Now you can run the application and see the New Role creation working.</p><h2 id="update-role">Update Role</h2><p>When user clicks on Edit button in List Roles screen we will take the user to Edit Role form where user can update the role description and assigned Permissions.</p><blockquote><p>Implementing the Edit Role screen is little bit tricky. We load the selected Role object which has a list of assigned Permission objects. But in screen we need to show all the available Permissions with the assigned permissions selected. As we are using indexed property binding *<strong>{permissions[__${rowStat.index}__].id}</strong> the role.permission objects index should match with the all List objects.</p></blockquote><p>Let us implement the SecurityService methods <strong>getRoleById()</strong> and <strong>updateRole()</strong> as follows:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Service</span>
<span style="color:#a6e22e">@Transactional</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SecurityService</span>
<span style="color:#f92672">{</span>
	<span style="color:#66d9ef">public</span> Role <span style="color:#a6e22e">updateRole</span><span style="color:#f92672">(</span>Role role<span style="color:#f92672">)</span>
	<span style="color:#f92672">{</span>
		Role persistedRole <span style="color:#f92672">=</span> getRoleById<span style="color:#f92672">(</span>role<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">());</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>persistedRole <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
			<span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> JCartException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Role &#34;</span><span style="color:#f92672">+</span>role<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">()+</span><span style="color:#e6db74">&#34; doesn&#39;t exist&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">setDescription</span><span style="color:#f92672">(</span>role<span style="color:#f92672">.</span><span style="color:#a6e22e">getDescription</span><span style="color:#f92672">());</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> updatedPermissions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> permissions <span style="color:#f92672">=</span> role<span style="color:#f92672">.</span><span style="color:#a6e22e">getPermissions</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>permissions <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
			<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Permission permission <span style="color:#f92672">:</span> permissions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
				<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span>
				<span style="color:#f92672">{</span>
					updatedPermissions<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>permissionRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findOne</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">()));</span>
				<span style="color:#f92672">}</span>
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span>
		persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">setPermissions</span><span style="color:#f92672">(</span>updatedPermissions<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> roleRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">save</span><span style="color:#f92672">(</span>persistedRole<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#66d9ef">public</span> Role <span style="color:#a6e22e">getRoleById</span><span style="color:#f92672">(</span>Integer id<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> roleRepository<span style="color:#f92672">.</span><span style="color:#a6e22e">findOne</span><span style="color:#f92672">(</span>id<span style="color:#f92672">);</span>
	<span style="color:#f92672">}</span> 
<span style="color:#f92672">}</span></code></pre></div><p>Implement the EditRole and Update Role handler methods as follows:</p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Controller</span>
<span style="color:#a6e22e">@Secured</span><span style="color:#f92672">(</span>SecurityUtil<span style="color:#f92672">.</span><span style="color:#a6e22e">MANAGE_ROLES</span><span style="color:#f92672">)</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RoleController</span> <span style="color:#66d9ef">extends</span> JCartAdminBaseController
<span style="color:#f92672">{</span>
	<span style="color:#f92672">...</span>
	<span style="color:#f92672">...</span>

	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span>value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/roles/{id}&#34;</span><span style="color:#f92672">,</span> method<span style="color:#f92672">=</span>RequestMethod<span style="color:#f92672">.</span><span style="color:#a6e22e">GET</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">editRoleForm</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@PathVariable</span> Integer id<span style="color:#f92672">,</span> Model model<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		Role role <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">getRoleById</span><span style="color:#f92672">(</span>id<span style="color:#f92672">);</span>
		Map<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> Permission<span style="color:#f92672">&gt;</span> assignedPermissionMap <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> permissions <span style="color:#f92672">=</span> role<span style="color:#f92672">.</span><span style="color:#a6e22e">getPermissions</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Permission permission <span style="color:#f92672">:</span> permissions<span style="color:#f92672">)</span>
		<span style="color:#f92672">{</span>
			assignedPermissionMap<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">(),</span> permission<span style="color:#f92672">);</span>
		<span style="color:#f92672">}</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> rolePermissions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span>
		List<span style="color:#f92672">&lt;</span>Permission<span style="color:#f92672">&gt;</span> allPermissions <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">getAllPermissions</span><span style="color:#f92672">();</span>
		<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Permission permission <span style="color:#f92672">:</span> allPermissions<span style="color:#f92672">)</span>
		<span style="color:#f92672">{</span>
			<span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>assignedPermissionMap<span style="color:#f92672">.</span><span style="color:#a6e22e">containsKey</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">())){</span>
				rolePermissions<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>permission<span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
				rolePermissions<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
			<span style="color:#f92672">}</span>
		<span style="color:#f92672">}</span>
		role<span style="color:#f92672">.</span><span style="color:#a6e22e">setPermissions</span><span style="color:#f92672">(</span>rolePermissions<span style="color:#f92672">);</span>
		model<span style="color:#f92672">.</span><span style="color:#a6e22e">addAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;role&#34;</span><span style="color:#f92672">,</span>role<span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> viewPrefix<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;edit_role&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
	<span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span>value<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/roles/{id}&#34;</span><span style="color:#f92672">,</span> method<span style="color:#f92672">=</span>RequestMethod<span style="color:#f92672">.</span><span style="color:#a6e22e">POST</span><span style="color:#f92672">)</span>
	<span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">updateRole</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@ModelAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;role&#34;</span><span style="color:#f92672">)</span> Role role<span style="color:#f92672">,</span> BindingResult result<span style="color:#f92672">,</span> 
			Model model<span style="color:#f92672">,</span> RedirectAttributes redirectAttributes<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>		
		Role persistedRole <span style="color:#f92672">=</span> securityService<span style="color:#f92672">.</span><span style="color:#a6e22e">updateRole</span><span style="color:#f92672">(</span>role<span style="color:#f92672">);</span>
		logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Updated role with id : {} and name : {}&#34;</span><span style="color:#f92672">,</span> persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">getId</span><span style="color:#f92672">(),</span> persistedRole<span style="color:#f92672">.</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
		redirectAttributes<span style="color:#f92672">.</span><span style="color:#a6e22e">addFlashAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Role updated successfully&#34;</span><span style="color:#f92672">);</span>
		<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;redirect:/roles&#34;</span><span style="color:#f92672">;</span>
	<span style="color:#f92672">}</span>
	
<span style="color:#f92672">}</span></code></pre></div><p>Note that we are iterating through allPermissions and preparing another list to match indexes. Looks weird to me..but&#8230;!!!.</p><p>Create the edit Role thymeleaf view <strong>jcart-admin/src/main/resources/templates/roles/edit_role.html</strong> as follows:</p><p></p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">xmlns</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.w3.org/1999/xhtml&#34;</span> <span style="color:#a6e22e">xmlns:th</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org&#34;</span>
	  <span style="color:#a6e22e">xmlns:sec</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&#34;</span>
      <span style="color:#a6e22e">layout:decorator</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;layout/mainLayout&#34;</span>&gt;
      
&lt;<span style="color:#f92672">head</span>&gt;
	&lt;<span style="color:#f92672">title</span>&gt;Roles - Edit&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
			
	&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">layout:fragment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span>&gt;
		
		  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box box-warning&#34;</span>&gt;
			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-header with-border&#34;</span>&gt;
			  &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-title&#34;</span>&gt;Edit Role&lt;/<span style="color:#f92672">h3</span>&gt;
			&lt;/<span style="color:#f92672">div</span>&gt;
			&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-body&#34;</span>&gt;
			  &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form&#34;</span> <span style="color:#a6e22e">th:action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/roles/{id}(id=${role.id})}&#34;</span> <span style="color:#a6e22e">th:object</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${role}&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span>&gt;
				&lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${#fields.hasErrors(&#39;global&#39;)}&#34;</span> <span style="color:#a6e22e">th:errors</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{global}&#34;</span> <span style="color:#a6e22e">th:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-red&#34;</span>&gt;Incorrect data&lt;/<span style="color:#f92672">p</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
				  &lt;<span style="color:#f92672">label</span>&gt;Name&lt;/<span style="color:#f92672">label</span>&gt;
				  &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;name&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{name}&#34;</span> <span style="color:#a6e22e">readonly</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;readonly&#34;</span>/&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
								
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
				  &lt;<span style="color:#f92672">label</span>&gt;Description&lt;/<span style="color:#f92672">label</span>&gt;
				  &lt;<span style="color:#f92672">textarea</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-control&#34;</span> <span style="color:#a6e22e">rows</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;description&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{description}&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter Role Description&#34;</span>&gt;&lt;/<span style="color:#f92672">textarea</span>&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;form-group&#34;</span>&gt;
					&lt;<span style="color:#f92672">label</span>&gt;Permissions&lt;/<span style="color:#f92672">label</span>&gt;
					&lt;<span style="color:#f92672">div</span>&gt;
					  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;permission,rowStat : ${permissionsList}&#34;</span>&gt;
						&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;checkbox&#34;</span> <span style="color:#a6e22e">th:field</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*{permissions[__${rowStat.index}__].id}&#34;</span> <span style="color:#a6e22e">th:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.id}&#34;</span> /&gt;
						&lt;<span style="color:#f92672">label</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${permission.name}&#34;</span>&gt;Permission&lt;/<span style="color:#f92672">label</span>&gt;
					  &lt;/<span style="color:#f92672">p</span>&gt;
					&lt;/<span style="color:#f92672">div</span>&gt;
					
				&lt;/<span style="color:#f92672">div</span>&gt;
				
				&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;box-footer&#34;</span>&gt;
					&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;btn btn-primary&#34;</span>&gt;Submit&lt;/<span style="color:#f92672">button</span>&gt;
				&lt;/<span style="color:#f92672">div</span>&gt;
			  &lt;/<span style="color:#f92672">form</span>&gt;
			&lt;/<span style="color:#f92672">div</span>&gt;
		  &lt;/<span style="color:#f92672">div</span>&gt;
	&lt;/<span style="color:#f92672">div</span>&gt;
	
&lt;/<span style="color:#f92672">body</span>&gt;    
&lt;/<span style="color:#f92672">html</span>&gt;</code></pre></div><p></p><p>Now we have completed all the actions related to Role management.</p></div><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-1144" class="share-twitter sd-button share-icon no-text" href="https://twitter.com/intent/tweet?status=JCart%3a%20Manage%20Roles-https%3a%2f%2fsivalabs.github.io%2f2015%2f12%2fjcart-manage-roles%2f" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-1144" class="share-facebook sd-button share-icon no-text" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fsivalabs.github.io%2f2015%2f12%2fjcart-manage-roles%2f" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-1144" class="share-google-plus-1 sd-button share-icon no-text" href="https://plus.google.com/share?url=https%3a%2f%2fsivalabs.github.io%2f2015%2f12%2fjcart-manage-roles%2f" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li><li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon no-text" href="http://www.reddit.com/submit?url=https%3a%2f%2fsivalabs.github.io%2f2015%2f12%2fjcart-manage-roles%2f&title=JCart%3a%20Manage%20Roles" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li><li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-1144" class="share-linkedin sd-button share-icon no-text" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fsivalabs.github.io%2f2015%2f12%2fjcart-manage-roles%2f&title=JCart%3a%20Manage%20Roles" target="_blank" title="Click to share on LinkedIn"><span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div></div></article><div class="comments"><div id="disqus_thread"></div><script>var disqus_config=function(){};!function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1)return void(document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.");var e=document,t=e.createElement("script");t.async=!0,t.src="//sivalabs.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div><nav class="navigation post-navigation" role="navigation"><h2 class="screen-reader-text">Post navigation</h2><div class="nav-links"><div class="nav-previous"><a href="/2015/12/jcart-manage-users/" rel="next"><i class="fa fa-chevron-left"></i> <span class="post-title">JCart: Manage Users</span></a></div><div class="nav-next"><a href="/2015/12/jcart-manage-privileges/" rel="prev"><span class="post-title">JCart: Manage Privileges <i class="fa fa-chevron-right"></i></span></a></div></div></nav></div></div><div id="secondary" class="widget-area col-sm-12 col-md-4" role="complementary"><div class="well"><aside id="zoom-social-icons-widget-2" class="widget zoom-social-icons-widget"><h3 class="widget-title">Social Networks</h3><ul class="zoom-social-icons-list zoom-social-icons-list--with-canvas zoom-social-icons-list--rounded zoom-social-icons-list--no-labels"><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="https://github.com/sivaprasadreddy" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-github" data-hover-rule="background-color" data-hover-color="#221e1b"></span></a></li><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="https://twitter.com/sivalabs" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-twitter" data-hover-rule="background-color" data-hover-color="#55acee"></span></a></li><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="https://facebook.com/sivaprasadreddy.k" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-facebook" data-hover-rule="background-color" data-hover-color="#3b5998"></span></a></li><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="https://plus.google.com/u/0/&#43;SivaPrasadReddy" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-google"></span></a></li><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="https://in.linkedin.com/in/siva-prasad-reddy-k-3a909172" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-linkedin" data-hover-rule="background-color" data-hover-color="#3371b7"></span></a></li><li class="zoom-social_icons-list__item"><a class="zoom-social_icons-list__link" href="http://www.youtube.com/c/SivaPrasadReddy%20" target="_blank"><span class="zoom-social_icons-list-span socicon socicon-youtube" data-hover-rule="background-color" data-hover-color="#e02a20"></span></a></li></ul></aside><aside id="widget_sp_image-4" class="widget widget_sp_image"><h3 class="widget-title">My Recent Books</h3><a href="https://www.amazon.com/Beginning-Spring-Boot-Applications-Microservices/dp/1484229304" target="_blank" class="widget_sp_image-image-link" title="My Recent Books"><img alt="Beginning Spring Boot 2" class="attachment-full" src="/images/ApressSpringBootBook.jpg"></a></aside><aside id="top-posts-3" class="widget widget_top-posts"><h3 class="widget-title">Popular Posts</h3><ul><li><a href="/2016/03/why-springboot/" class="bump-view" data-bump-view="tp">Why SpringBoot?</a></li><li><a href="/2016/03/how-springboot-autoconfiguration-magic/" class="bump-view" data-bump-view="tp">How SpringBoot AutoConfiguration magic works?</a></li><li><a href="/2017/08/spring-cloud-tutorials-introduction-to-spring-cloud-config-server/" class="bump-view" data-bump-view="tp">Spring Cloud Tutorials – Introduction to Spring Cloud Config Server</a></li><li><a href="/2017/08/spring-cloud-tutorials-auto-refresh-config-changes-using-spring-cloud-bus/" class="bump-view" data-bump-view="tp">Spring Cloud Tutorials – Auto Refresh Config Changes using Spring Cloud Bus</a></li><li><a href="/2016/03/springboot-working-with-jdbctemplate/" class="bump-view" data-bump-view="tp">SpringBoot : Working with JdbcTemplate</a></li><li><a href="/2015/11/developing-a-simple-e-commerce-application-from-scratch-to-production-using-springboot/" class="bump-view" data-bump-view="tp">Developing a simple e-commerce application from scratch to production using SpringBoot</a></li><li><a href="/2013/12/clean-code-dont-mix-different-levels-of-abstractions/" class="bump-view" data-bump-view="tp">Clean Code: Don’t mix different levels of abstractions</a></li><li><a href="/2015/06/a-developers-perspective-on-spring-vs-javaee/" class="bump-view" data-bump-view="tp">A Developers Perspective on Spring vs JavaEE</a></li><li><a href="/2015/07/my-life-as-software-developer-in-india/" class="bump-view" data-bump-view="tp">My Life as a Software Developer in India</a></li><li><a href="/2011/01/10-things-to-become-outstanding-java/" class="bump-view" data-bump-view="tp">10 things to become an outstanding Java developer</a></li></ul></aside><aside id="recent-posts-2" class="widget widget_recent_entries"><h3 class="widget-title">Recent Posts</h3><ul><li class="widget__item"><a class="widget__link" href="/2017/11/my-review-of-vlad-mihalceas-high-performance-java-persistence-book/">My Review of Vlad Mihalcea’s High-Performance Java Persistence book</a></li><li class="widget__item"><a class="widget__link" href="/2017/10/select-all-starters-on-spring-initializer-httpstart-spring-io/">Select ALL starters on Spring Initializer (http://start.spring.io)</a></li><li class="widget__item"><a class="widget__link" href="/2017/08/spring-cloud-tutorials-auto-refresh-config-changes-using-spring-cloud-bus/">Spring Cloud Tutorials – Auto Refresh Config Changes using Spring Cloud Bus</a></li><li class="widget__item"><a class="widget__link" href="/2017/08/spring-cloud-tutorials-introduction-to-spring-cloud-config-server/">Spring Cloud Tutorials – Introduction to Spring Cloud Config Server</a></li><li class="widget__item"><a class="widget__link" href="/2016/09/getting-started-springboot-intellij-idea-community-edition/">Getting Started with SpringBoot in Intellij IDEA Community Edition</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/update-springboot-learn-example-book/">Update on SpringBoot : Learn By Example book</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/fix-vt-x-disabled-bios-error/">How to fix “vt-x is disabled in the bios” error?</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/my-new-book-springboot-learn-by-example/">My New Book SpringBoot : Learn By Example Published Today</a></li><li class="widget__item"><a class="widget__link" href="/2016/06/my-review-of-sanjay-patels-spring-course/">My Review of Sanjay Patel’s Spring Course</a></li><li class="widget__item"><a class="widget__link" href="/2016/04/creating-custom-springboot-starter-for/">Creating Custom SpringBoot Starter for Twitter4j</a></li></ul></aside><aside id="tag_cloud-5" class="widget widget_tag_cloud"><h3 class="widget-title">Tags</h3><div class="tagcloud"><div class="widget__content"><a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/android" title="Android">Android</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/best-practices" title="Best Practices">Best Practices</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/blogging" title="Blogging">Blogging</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/books" title="Books">Books</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/e-commerce" title="E-Commerce">E-Commerce</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/ide" title="IDE">IDE</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/it" title="IT">IT</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/interviews" title="Interviews">Interviews</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/jsf" title="JSF">JSF</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/java" title="Java">Java</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/javaee" title="JavaEE">JavaEE</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/linux" title="Linux">Linux</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/maven" title="Maven">Maven</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/mybatis" title="MyBatis">MyBatis</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/primefaces" title="PrimeFaces">PrimeFaces</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/servlets-jsp" title="Servlets JSP">Servlets JSP</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/spring" title="Spring">Spring</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/springboot" title="SpringBoot">SpringBoot</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/springcloud" title="SpringCloud">SpringCloud</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/tips" title="Tips">Tips</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/virtualbox" title="VirtualBox">VirtualBox</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/books" title="books">books</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/jcart" title="jcart">jcart</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/jooq" title="jooq">jooq</a> <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/videos" title="videos">videos</a></div></div></aside><aside class="widget widget_categories"><h3 class="widget-title">Categories</h3><ul><li class="cat-item"><a href="/categories/best-practices">Best Practices</a></li><li class="cat-item"><a href="/categories/books">Books</a></li><li class="cat-item"><a href="/categories/ide">IDE</a></li><li class="cat-item"><a href="/categories/java">Java</a></li><li class="cat-item"><a href="/categories/javaee">JavaEE</a></li><li class="cat-item"><a href="/categories/linux">Linux</a></li><li class="cat-item"><a href="/categories/misc">Misc</a></li><li class="cat-item"><a href="/categories/spring">Spring</a></li><li class="cat-item"><a href="/categories/tips">Tips</a></li><li class="cat-item"><a href="/categories/books">Books</a></li><li class="cat-item"><a href="/categories/videos">Videos</a></li></ul></aside></div></div></div></div></div><div id="footer-area"><div class="container footer-inner"><div class="row"><div class="footer-widget-area"><div class="col-sm-4 footer-widget" role="complementary"><div id="sparkling_popular_posts-3" class="widget sparkling-popular-posts"><h3 class="widgettitle">Recent Posts</h3><div class="popular-posts-wrapper"><ul><li class="widget__item"><a class="widget__link" href="/2017/11/my-review-of-vlad-mihalceas-high-performance-java-persistence-book/">My Review of Vlad Mihalcea’s High-Performance Java Persistence book</a></li><li class="widget__item"><a class="widget__link" href="/2017/10/select-all-starters-on-spring-initializer-httpstart-spring-io/">Select ALL starters on Spring Initializer (http://start.spring.io)</a></li><li class="widget__item"><a class="widget__link" href="/2017/08/spring-cloud-tutorials-auto-refresh-config-changes-using-spring-cloud-bus/">Spring Cloud Tutorials – Auto Refresh Config Changes using Spring Cloud Bus</a></li><li class="widget__item"><a class="widget__link" href="/2017/08/spring-cloud-tutorials-introduction-to-spring-cloud-config-server/">Spring Cloud Tutorials – Introduction to Spring Cloud Config Server</a></li><li class="widget__item"><a class="widget__link" href="/2016/09/getting-started-springboot-intellij-idea-community-edition/">Getting Started with SpringBoot in Intellij IDEA Community Edition</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/update-springboot-learn-example-book/">Update on SpringBoot : Learn By Example book</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/fix-vt-x-disabled-bios-error/">How to fix “vt-x is disabled in the bios” error?</a></li><li class="widget__item"><a class="widget__link" href="/2016/07/my-new-book-springboot-learn-by-example/">My New Book SpringBoot : Learn By Example Published Today</a></li><li class="widget__item"><a class="widget__link" href="/2016/06/my-review-of-sanjay-patels-spring-course/">My Review of Sanjay Patel’s Spring Course</a></li><li class="widget__item"><a class="widget__link" href="/2016/04/creating-custom-springboot-starter-for/">Creating Custom SpringBoot Starter for Twitter4j</a></li></ul></div></div></div><div class="col-sm-4 footer-widget" role="complementary"><div id="sparkling-cats-3" class="widget sparkling-cats"><h3 class="widgettitle">Categories</h3><div class="cats-widget"><ul><li class="cat-item"><a href="/categories/best-practices">Best Practices</a></li><li class="cat-item"><a href="/categories/books">Books</a></li><li class="cat-item"><a href="/categories/ide">IDE</a></li><li class="cat-item"><a href="/categories/java">Java</a></li><li class="cat-item"><a href="/categories/javaee">JavaEE</a></li><li class="cat-item"><a href="/categories/linux">Linux</a></li><li class="cat-item"><a href="/categories/misc">Misc</a></li><li class="cat-item"><a href="/categories/spring">Spring</a></li><li class="cat-item"><a href="/categories/tips">Tips</a></li><li class="cat-item"><a href="/categories/books">Books</a></li><li class="cat-item"><a href="/categories/videos">Videos</a></li></ul></div></div></div><div class="col-sm-4 footer-widget" role="complementary"><div id="text-2" class="widget widget_text"><div class="textwidget"><p></p><h3 class="widgettitle">Tag Cloud</h3><p></p><div class="tagcloud"><div class="widget__content"><a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/android" title="Android">Android</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/best-practices" title="Best Practices">Best Practices</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/blogging" title="Blogging">Blogging</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/books" title="Books">Books</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/e-commerce" title="E-Commerce">E-Commerce</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/ide" title="IDE">IDE</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/it" title="IT">IT</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/interviews" title="Interviews">Interviews</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/jsf" title="JSF">JSF</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/java" title="Java">Java</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/javaee" title="JavaEE">JavaEE</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/linux" title="Linux">Linux</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/maven" title="Maven">Maven</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/mybatis" title="MyBatis">MyBatis</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/primefaces" title="PrimeFaces">PrimeFaces</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/servlets-jsp" title="Servlets JSP">Servlets JSP</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/spring" title="Spring">Spring</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/springboot" title="SpringBoot">SpringBoot</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/springcloud" title="SpringCloud">SpringCloud</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/tips" title="Tips">Tips</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/virtualbox" title="VirtualBox">VirtualBox</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/books" title="books">books</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/jcart" title="jcart">jcart</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/jooq" title="jooq">jooq</a> <a class="tag-cloud-link widget__link widget__link--taglist" style="background-color:#989898" href="/tags/videos" title="videos">videos</a></div></div></div></div></div></div></div></div><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info container"><div class="row"><nav role="navigation" class="col-md-3"></nav><div class="copyright col-md-6"><a href="/" target="_blank">SivaLabs</a> Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a></div></div></div><div class="scroll-to-top"><i class="fa fa-angle-up"></i></div></footer></div></div><script type="text/javascript" src="/assets/js/vendor/jquery-1.12.4.min.js"></script><script type="text/javascript" src="/assets/js/vendor/modernizr.min.js"></script><script type="text/javascript" src="/assets/js/vendor/bootstrap.min.js"></script><script type="text/javascript" src="/assets/js/functions.min.js"></script><div class="analytics"><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-71296890-1","auto"),ga("send","pageview")</script><script async src="//www.google-analytics.com/analytics.js"></script></div><script id="mcjs">!function(e,t,c,s,a){s=e.createElement(t),a=e.getElementsByTagName(t)[0],s.async=1,s.src=c,a.parentNode.insertBefore(s,a)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/a244435ef0378fac204b5a2d4/5f76189934783143aeb496d1e.js")</script><script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">require(["mojo/signup-forms/Loader"],function(d){d.start({baseUrl:"mc.us9.list-manage.com",uuid:"a244435ef0378fac204b5a2d4",lid:"bdded8d3db"})})</script></body></html>